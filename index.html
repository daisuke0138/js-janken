<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tramp</title>
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP" rel="stylesheet" />
  <link rel="stylesheet" href="./css/tramp.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css" />
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css" />
</head>

<body>
<!-- トランプ13枚 -->
<div class="com-hand-img-box" id="com-hand-anime" style="display: none;">
    <img class="tramp-img" src="./images/torannpu-illust2.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust3.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust4.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust5.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust6.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust7.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust8.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust9.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust10.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust11.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust12.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust13.png" alt="">
    <img class="tramp-img" src="./images/torannpu-illust1.png" alt="">
</div>

<!-- slickスライダ -->
<div>
  <h1 class="top-text"><img src="./images/torannpu-illust1.png" alt="tramp-01"><img src="./images/torannpu-illust11.png" alt="tramp-11">
    Tramp Game<img src="./images/torannpu-illust12.png" alt="tramp-12"><img src="./images/torannpu-illust13.png" alt="tramp-13"></h1>
  <p class="count" id="count">Start !</p>
</div>
<p id="chara-text" class="chara-text">Character select</p>
<p id="chara-text2" class="chara-text2">&lt;please Click on the character name&gt;</Character></p>
<div id="slick" class="slick-slider">
  <div class="slider-img">
    <img id="chara01_img" src="./images/chara-01.png" alt="">
    <p id="chara01" class="chara-name">William</p>
  </div>
  <div class="slider-img">
    <img id="chara02_img" src="./images/chara-02.png" alt="">
    <p id="chara02" class="chara-name">Patricia</p>
  </div>
  <div class="slider-img">
    <img id="chara03_img" src="./images/chara-04.png" alt="">
    <p id="chara03" class="chara-name">Karen</p>
  </div>
  <div class="slider-img">
    <img id="chara04_img" src="./images/chara-05.png" alt="">
    <p id="chara04" class="chara-name">David</p>
  </div>
</div>

<!-- character画像選択ボタン -->
<div class="chara_select_button">
  <button id="chara-select-end">character OK!</button>
  <button id="chara_reselect">Re-selection</button>
</div>

  <!-- じゃんけんゲーム -->
<div>
<!-- 画像配置box -->
  <div class="img-body">
    <!-- 最初の画像 -->
    <div class="start-img" id="start-img">
      <img src="./images/tramp-back-img.png" alt="start-img">
    </div>
    <!-- 勝敗結果を表示 -->
    <div id="result-img-box" class="result-img-box">
    <!-- player勝敗履歴 -->
      <div id="p-result-box" class="result-box" >
        <p class="chara-name">Player</p>
        <div id="p-chara-img-box" class="chara-img-box">
          <img id="p-chara-img" src="" alt="" style="display: none;">
        </div>
        <p class="count-text" id="p-r-count" style="display: none;">0wins0loss0draw</p>
      </div>
      <!-- 自分が選んだ画像 -->
      <div id="my-img-box" class="result-box" style="display: none;">
        <p></p> <!-- 高さ調整用の空間タグ -->
        <img src="" alt="" id="my-card" style="display: none;">
        <p></p> <!-- 高さ調整用の空間タグ -->
      </div>
      <!-- shuffle -->
      <div id="base-tramp" class="base-tramp" style="display: none;">
        <img class="base-card" src="./images/tramp-back-img.png" alt="">
        <div class="shuffle-box">
          <img class="shuffle-card" src="./images/tramp-back-img.png" alt="">
          <img class="shuffle-card" src="./images/tramp-back-img.png" alt="">
          <img class="shuffle-card" src="./images/tramp-back-img.png" alt="">
        </div>
      </div>
      <!-- 勝敗画像 -->
      <div id="result-win-or-lose" style="display: none;">
        <p></p> <!-- 高さ調整用の空間タグ -->
        <div class="result-box" style="display: none;">
          <img id="result-img" src="" alt="" style="display: none;">
        </div>
        <p class="result-text" id="result" style="display: none;">勝敗は？？</p>
      </div>
      <!-- comが選んだ画像 -->
      <div id="com-img-box" class="result-box" style="display: none;">
        <p></p> <!-- 高さ調整用の空間タグ -->
        <img src="" alt="" id="com-card" style="display: none;">
        <p></p> <!-- 高さ調整用の空間タグ -->
      </div>
      <!-- com勝敗離履歴-->
      <div id="c-result-box" class="result-box" >
        <p class="chara-name">Computer</p>
        <div id="c-chara-img-box" class="chara-img-box">
          <img id="c-chara-img" src="" alt="" style="display: none;" >
        </div>
        <p class="count-text" id="c-r-count" style="display: none;">0wins0loss0draw</p>
      </div>
    </div>
  </div>

<!-- ボタン配置 -->
  <div id="button-box" class="button-box">
    <div class="button">
      <button class="shuffle-bt" id="startAnimationBtn" style="display: none;">Shuffle</button>
      <button class="shuffle-bt" id="stopAnimationBtn" style="display: none;">Stop</button>
    </div>
    <div class="button" id="another-round-bt" style="display: none;">
      <button id="restart">Another round</button>
    </div>
  </div>
  <div class="reset-button" id="reset-button" style="display: none;">
    <button class="reset" id="reset">Game over</button>
  </div>
</div>
</body>

<!-- jquery cdn -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- slick cdn -->
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<!-- shuffle-test -->
<script>
  $(document).ready(function () {
    let animationInterval;
    $('#startAnimationBtn').click(function () {
      animationInterval = setInterval(function () {
        $('.shuffle-card').each(function () {
          $(this).animate({ top: '+=50px', left: '+=50px' }, 'fast').animate({ top: '-=50px', left: '-=50px' }, 'fast');
        });
      }, 100); // 0.1秒ごとにアニメーションを開始
    });
    $('#stopAnimationBtn').click(function () {
      clearInterval(animationInterval);
      $('.shuffle-card').stop(true, true).css({ top: 100, left: 100 });
    });
  });
</script>

<!-- slickテスト用script -->
<script>
  $(document).ready(function () {
    $("#slick").slick({
      centerMode: true,
      centerPadding:"10%", //centerMode時に前後のスライドが見える幅
      prevArrow: '<img src="./images/arrow-left.png" class="slick-prev prev-arrow">', //前のスライドへ切り替える矢印（ボタン）を指定
      nextArrow: '<img src="./images/arrow-right.png" class="slick-next next-arrow">', //次のスライドへ切り替える矢印（ボタン）を指定
      dots:  true, //ドット状のナビを表示
      dotsClass: 'slide-dots', //ドット状のナビにclass名「dots-class」を付ける
      autoplay: false, //「自動再生」を有効化
      pauseOnHover: false, //スライドの上にマウスを乗せても停止させない
      slidesToShow: 3, //スライドのエリアに画像がいくつ表示されるかを指定
      slidesToScroll: 1, //一度にスライドする数
      // autoplaySpeed: 3000, //次のスライドショーが動作するまでの間隔
      // speed: 400, //スライドが切り替わるのにかかるスピード
    });
  });
</script>

<!-- character画像選択テスト -->
<script>
  $(document).ready(function () {
    $(".chara-name").click(function () {
      let charaId = $(this).attr("id");
      let imgId = charaId + "_img";
      let select_img_src = $("#" + imgId).attr("src");
      let select_img_alt = $("#" + imgId).attr("alt");
      let p_select_img = '<img src="' + select_img_src + '" alt="' + select_img_alt + '">';
      $("#p-chara-img").html(""); // プレイヤーの画像を表示する要素を空にする
      $("#c-chara-img").html(""); // コンピューターの画像を表示する要素を空にする
      //  画像を表示する処理の前に、画像がすでに表示されているかを確認する
      if ($("#p-chara-img").html() === "") {
        $("#p-chara-img-box").html(p_select_img); // プレイヤーの画像を表示する要素に画像を表示
      } else {$("#c-chara-img-box").html(p_select_img);
      } // コンピューターの画像を表示する要素に画像を表示
    });
  });
    $("#chara_reselect").click(function(){
      location.reload(true)
    });
</script>

<!-- ゲーム用script -->
<script>
// 変数の定義
// playerの勝ち数カウント
  let p_r_ct_w=0;
  // playerの負け数カウント
  let p_r_ct_l = 0;
  // playerの引き分けカウント
  let p_r_ct_d = 0;
  // comの勝ち数カウント
  let c_r_ct_w = 0;
  // comの負け数カウント
  let c_r_ct_l = 0;
  // comの引き分けカウント
  let c_r_ct_d = 0;

  // スタートボタン後の表示
  $(document ).ready(function () {
    $("#chara-select-end").click(function () {
      $("#chara-select-end").hide();
      $("#chara_reselect").hide();
      $("#slick").hide();
      $("#chara-text").hide();
      $("#chara-text2").hide();
      $("#start-img").hide();
      $("#startAnimationBtn").show();
      $("#p-r-count").show();
      $("#c-r-count").show();
      $('#result-win-or-lose').show();
      $('#result-img').hide();
      $('#base-tramp').show();
      $("#my-img-box").show();
      $("#com-img-box").show();
      $('.result-box').show();
    })
    $("#startAnimationBtn").click(function () {
      $("#start-img").hide();
      $("#startAnimationBtn").hide();
      $("#stopAnimationBtn").show();
      $("#choise-text").show();
      $('#result-win-or-lose').show();
      $('#result-img').hide();
      $("#my-img-box").show();
      $("#com-img-box").show();
      $('#base-tramp').show();
      $('.result-box').show();

    })
    $("#stopAnimationBtn").click(function () {
      let tramp_images =$(".tramp-img");
      console.log(tramp_images)
      let randomNom1 = Math.floor(Math.random() * tramp_images.length);
      let randomNom2 = Math.floor(Math.random() * tramp_images.length);
      $("#com-img-box").show();
      $("#my-img-box").show();
      // プレイヤーのカードを表示
      $('#my-card').attr('src', tramp_images.eq(randomNom1).attr('src')).show();
      // コンピュータのカードを表示
      $('#com-card').attr('src', tramp_images.eq(randomNom2).attr('src')).show();
      if (randomNom1 > randomNom2){
        $("#result-img").attr('src','./images/cajino-win.png');
        $("#result-win-or-lose").show();
        $("#result-img").show();
        $('.result-box').show();
        $('#result').text("You win");
        $("#result").show();
        p_r_ct_w++;
        c_r_ct_l++;
        let p_result = p_r_ct_w + "wins" + " " + p_r_ct_l + "loss" + " " + p_r_ct_d + "draw";
        let c_result = c_r_ct_w + "wins" + " " + c_r_ct_l + "loss" + " " + c_r_ct_d + "draw";
        $("#p-r-count").text(p_result);
        $("#c-r-count").text(c_result);
        $("#reset-button").show();
        $("#another-round-bt").show();
        $("#stopAnimationBtn").hide();
        $('#base-tramp').hide();
        $("#resule-box").show();
      } else if(randomNom1 < randomNom2){
        $("#result-img").attr('src', './images/cajino-lose.png');
        $("#result-win-or-lose").show();
        $("#result-img").show();
        $('.result-box').show();
        $('#result').text("You lose");
        $("#result").show();
        p_r_ct_l++;
        c_r_ct_w++;
        let p_result = p_r_ct_w + "wins" + " " + p_r_ct_l + "loss" + " " + p_r_ct_d + "draw";
        let c_result = c_r_ct_w + "wins" + " " + c_r_ct_l + "loss" + " " + c_r_ct_d + "draw";
        $("#p-r-count").text(p_result);
        $("#c-r-count").text(c_result);
        $("#reset-button").show();
        $("#another-round-bt").show();
        $("#stopAnimationBtn").hide();
        $('#base-tramp').hide();
        $("#resule-box").show();
      }else if (randomNom1 === randomNom2) {
        $("#result-img").attr('src', './images/cajino-draw.png');
        $("#result-win-or-lose").show();
        $("#result-img").show();
        $('.result-box').show();
        $('#result').text("Game draw");
        $("#result").show();
        p_r_ct_d++;
        c_r_ct_d++;
        let p_result = p_r_ct_w + "wins" +" "+ p_r_ct_l + "loss" + " " + p_r_ct_d + "draw";
        let c_result = c_r_ct_w + "wins" +" "+ c_r_ct_l + "loss" + " " + c_r_ct_d + "draw";
        $("#p-r-count").text(p_result);
        $("#c-r-count").text(c_result);
        $("#reset-button").show();
        $("#another-round-bt").show();
        $("#stopAnimationBtn").hide();
        $('#base-tramp').hide();
      }
    });

// another round ボタンを押したときの表示
    $("#another-round-bt").click(function () {
      $("#start-img").hide();
      $("#another-round-bt").hide();
      $("#reset-button").hide();
      $("#choise-text").show();
      $('#result-win-or-lose').show();
      $('#result-img').hide();
      $("#my-img-box").show();
      $("#com-img-box").show();
      $("#my-card").hide();
      $("#com-card").hide();
      $('#base-tramp').show();
      $("#startAnimationBtn").show();
      $('.result-box').show();
      });
    });

// 対戦回数のカウントup
// let 上書きできる変数 メモ 
let count = 0   ;
$("#startAnimationBtn").on("click",function(){
  count++;
  let vscount = "Game" +" "+ count ;
  $("#count").text(vscount);
});

// 画面更新ボタン
    document.getElementById("reset-button").addEventListener("click", function () {
    location.reload(true);});
</script>
</body>
</html>